"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4487],{4487:(T,d,l)=>{l.r(d),l.d(d,{RegistroadminPageModule:()=>U});var m=l(6814),u=l(95),r=l(9004),_=l(3044),g=l(5861),o=l(6689),p=l(9167);function h(n,s){if(1&n&&(o.TgZ(0,"ion-select-option",14),o._uU(1),o.qZA()),2&n){const e=s.$implicit;o.Q6J("value",e.id),o.xp6(1),o.Oqu(e.nomrol)}}function P(n,s){if(1&n){const e=o.EpF();o.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),o._uU(3),o.qZA()(),o.TgZ(4,"ion-card-content")(5,"p"),o._uU(6),o.qZA(),o.TgZ(7,"p"),o._uU(8),o.qZA()(),o.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-item")(12,"ion-label"),o._uU(13,"Rol:"),o.qZA(),o.TgZ(14,"ion-select",8),o.NdJ("ngModelChange",function(t){o.CHM(e);const a=o.oxw();return o.KtG(a.nuevoRolId=t)}),o.YNc(15,h,2,2,"ion-select-option",9),o.qZA()()(),o.TgZ(16,"ion-col")(17,"ion-button",10),o.NdJ("click",function(){const a=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.actualizarRolUsuario(a.usuarioid,c.nuevoRolId))}),o._UZ(18,"ion-icon",11),o._uU(19," Actualizar Rol "),o.qZA()(),o.TgZ(20,"ion-col")(21,"ion-button",12),o.NdJ("click",function(){const a=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.eliminarUsuario(a.usuarioid))}),o._UZ(22,"ion-icon",13),o._uU(23," Eliminar Usuario "),o.qZA()()()()}if(2&n){const e=s.$implicit,i=o.oxw();o.xp6(3),o.AsE("",e.nombre," ",e.apellido,""),o.xp6(3),o.hij("Correo: ",e.correo,""),o.xp6(2),o.hij("Rol: ",e.rolid,""),o.xp6(6),o.Q6J("ngModel",i.nuevoRolId),o.xp6(1),o.Q6J("ngForOf",i.roles)}}function Z(n,s){if(1&n&&(o.TgZ(0,"ion-item")(1,"ion-label"),o._uU(2),o.qZA()()),2&n){const e=s.$implicit;o.xp6(2),o.AsE("Numero Rol: ",e.nomrol," Nombre Rol: ",e.nomrol,"")}}function f(n,s){if(1&n){const e=o.EpF();o.TgZ(0,"ion-item")(1,"ion-label"),o._uU(2),o.qZA(),o.TgZ(3,"ion-button",12),o.NdJ("click",function(){const a=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.eliminarPregunta(a.idpreguntas))}),o._UZ(4,"ion-icon",13),o.qZA()()}if(2&n){const e=s.$implicit;o.xp6(2),o.Oqu(e.pregunta)}}const v=[{path:"",component:(()=>{var n;class s{constructor(i){this.servicioDB=i,this.usuarios=[],this.pregunta3=[],this.nuevaPregunta="",this.roles=[]}ionViewDidEnter(){this.loadRoles(),this.cargarUsuarios(),this.cargarPreguntas()}loadRoles(){this.servicioDB.obtenerRoles().then(i=>{this.roles=i})}cargarUsuarios(){this.servicioDB.obtenerUsuarios().then(i=>{console.log("Datos de usuarios obtenidos:",i),this.usuarios=i})}cargarPreguntas(){this.servicioDB.obtenerPreguntas().then(i=>{this.pregunta3=i})}eliminarUsuario(i){var t=this;return(0,g.Z)(function*(){try{yield t.servicioDB.eliminarUsuario(i),t.cargarUsuarios()}catch(a){console.error("Error al eliminar usuario:",a)}})()}eliminarPregunta(i){var t=this;return(0,g.Z)(function*(){try{yield t.servicioDB.eliminarPregunta(i),console.log("Datos de preguntas borrados:"),t.cargarPreguntas()}catch(a){console.error("Error al eliminar pregunta:",a)}})()}agregarPregunta(){var i=this;return(0,g.Z)(function*(){try{""!==i.nuevaPregunta.trim()&&(yield i.servicioDB.insertarPregunta(i.nuevaPregunta),i.cargarPreguntas(),i.nuevaPregunta="")}catch(t){console.error("Error al agregar pregunta:",t)}})()}actualizarRolUsuario(i,t){this.servicioDB.actualizarRolUsuario(i,t).then(()=>{console.log("Rol actualizado con \xe9xito."),this.servicioDB.obtenerUsuarios().then(a=>{this.usuarios=a})}).catch(a=>{console.error("Error al actualizar el rol:",a)})}ngOnInit(){}}return(n=s).\u0275fac=function(i){return new(i||n)(o.Y36(p.A))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-registroadmin"]],decls:23,vars:4,consts:[["slot","start"],["defaultHref","/adminvista"],["color","primary"],[4,"ngFor","ngForOf"],["color","primary","sticky",""],["position","floating"],["required","",3,"ngModel","ngModelChange"],["expand","full",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary","fill","clear",3,"click"],["name","refresh"],["color","danger","fill","clear",3,"click"],["name","trash"],[3,"value"]],template:function(i,t){1&i&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),o._UZ(3,"ion-back-button",1),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5," Lista de Registros "),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item-divider",2),o._uU(9," Usuarios "),o.qZA(),o.YNc(10,P,24,6,"ion-card",3),o.TgZ(11,"ion-item-divider",2),o._uU(12," Roles "),o.qZA(),o.YNc(13,Z,3,2,"ion-item",3),o.TgZ(14,"ion-item-divider",4),o._uU(15," Preguntas "),o.qZA(),o.YNc(16,f,5,1,"ion-item",3),o.TgZ(17,"ion-item")(18,"ion-label",5),o._uU(19,"Nueva Pregunta"),o.qZA(),o.TgZ(20,"ion-input",6),o.NdJ("ngModelChange",function(c){return t.nuevaPregunta=c}),o.qZA()(),o.TgZ(21,"ion-button",7),o.NdJ("click",function(){return t.agregarPregunta()}),o._uU(22,"Agregar Pregunta"),o.qZA()()()),2&i&&(o.xp6(10),o.Q6J("ngForOf",t.usuarios),o.xp6(3),o.Q6J("ngForOf",t.roles),o.xp6(3),o.Q6J("ngForOf",t.pregunta3),o.xp6(4),o.Q6J("ngModel",t.nuevaPregunta))},dependencies:[m.sg,u.JJ,u.Q7,u.On,r.YG,r.Sm,r.PM,r.FN,r.Zi,r.Dq,r.wI,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.rH,r.Q$,r.q_,r.Nd,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9,r.oU],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;width:100%}ion-item[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:auto}"]}),s})()}];let R=(()=>{var n;class s{}return(n=s).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[_.Bz.forChild(v),_.Bz]}),s})(),U=(()=>{var n;class s{}return(n=s).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[m.ez,u.u5,r.Pc,R]}),s})()}}]);