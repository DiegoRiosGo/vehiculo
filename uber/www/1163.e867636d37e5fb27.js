"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1163],{1163:(x,d,i)=>{i.r(d),i.d(d,{NuevacontraenaPageModule:()=>f});var g=i(6814),p=i(95),r=i(9004),l=i(3044),n=i(6689),h=i(9167);let m=(()=>{var o;class t{constructor(){}validarcontrase\u00f1a(a,e,c){return/^(?=.*[a-zA-Z])(?=.*[^a-zA-Z\d\s]{2})(?=.*\d)(?!.*\bemail\b)(?!.*\bnombre\b)(?!.*(\d)\1)(?=.{5,12}$)/.test(a)&&!this.esSimilar(a,e,c)}esSimilar(a,e,c){const u=a.toLowerCase(),P=e.toLowerCase(),C=c.toLowerCase();return u.includes(P)||u.includes(C)}}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();const v=[{path:"",component:(()=>{var o;class t{constructor(a,e,c,u){this.db=a,this.aroute=e,this.router=c,this.valcontrase\u00f1a=u}ngOnInit(){this.aroute.paramMap.subscribe(a=>{var e;const c=null!==(e=a.get("usuarioid"))&&void 0!==e?e:"";this.usuarioid=parseInt(c,10)||0,console.log("Usuarioid en nuevacontrase\xf1a:",this.usuarioid)})}validarYCambiarContrase\u00f1a(){this.contrasena===this.rcontrasena&&this.valcontrase\u00f1a.validarcontrase\u00f1a(this.contrasena,"correo","nombre")?this.db.buscarUsuarioPorId(this.usuarioid).then(a=>{a?(this.usuario=a,this.db.actualizarUsuario(this.usuario.usuarioid,this.usuario.nombre,this.usuario.apellido,this.usuario.correo,this.contrasena,this.usuario.idpreguntas,this.usuario.respuesta,this.usuario.rolid,this.usuario.imagenperfil).then(()=>{console.log("Contrasena actualizada correctamente."),this.router.navigate(["/home"])}).catch(e=>{console.error("Error al actualizar la contrasena:",e)})):console.log("No se encontr\xf3 el usuario con ID:",this.usuarioid)}).catch(a=>{console.error("Error al buscar usuario por ID:",a)}):console.log("Las contrasenas no coinciden o no cumplen con los criterios de validaci\xf3n.")}}return(o=t).\u0275fac=function(a){return new(a||o)(n.Y36(h.A),n.Y36(l.gz),n.Y36(l.F0),n.Y36(m))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-nuevacontraena"]],decls:21,vars:3,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"login-card"],[1,"custom-item"],["position","floating","color","primary"],["type","password"],[1,"login-buttons"],["expand","full","color","success"]],template:function(a,e){1&a&&(n.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-card",3)(4,"ion-card-content")(5,"h2"),n._uU(6,"Nueva contrasena"),n.qZA(),n.TgZ(7,"ion-item",4)(8,"ion-label",5),n._uU(9,"Contrasena"),n.qZA(),n.TgZ(10,"ion-input",6),n._uU(11),n.qZA()(),n.TgZ(12,"ion-item",4)(13,"ion-label",5),n._uU(14,"Repita la Contrasena"),n.qZA(),n.TgZ(15,"ion-input",6),n._uU(16),n.qZA()(),n.TgZ(17,"div",7)(18,"ion-button",8),n._uU(19,"aceptar"),n.qZA(),n._UZ(20,"br"),n.qZA()()()()()()),2&a&&(n.Q6J("fullscreen",!0),n.xp6(11),n.Oqu(e.contrasena),n.xp6(5),n.Oqu(e.rcontrasena))},dependencies:[r.YG,r.PM,r.FN,r.W2,r.pK,r.Ie,r.Q$,r.j9],styles:["ion-card.login-card[_ngcontent-%COMP%]{width:90%;height:70%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item-head[_ngcontent-%COMP%]{width:90%;margin:20px auto auto;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{width:90%;margin:20px auto auto;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10px}.login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:90%;margin-top:10px;border-radius:10px;font-size:10px}.recovery-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.mensaje-error[_ngcontent-%COMP%]{color:red;margin-top:10px}"]}),t})()}];let b=(()=>{var o;class t{}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[l.Bz.forChild(v),l.Bz]}),t})(),f=(()=>{var o;class t{}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.ez,p.u5,r.Pc,b]}),t})()}}]);