"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5746],{5746:(k,m,a)=>{a.r(m),a.d(m,{PerfilconductorPageModule:()=>_});var h=a(177),f=a(4341),l=a(849),d=a(8986),u=a(467),e=a(4438),b=a(9348),P=a(2890),v=a(6210);function y(i,c){if(1&i&&(e.j41(0,"ion-list",19)(1,"ion-item",20),e.nrm(2,"img",21),e.j41(3,"ion-label",22),e.EFF(4),e.k0s()()()),2&i){const s=e.XpG();e.R7$(2),e.FS9("src",s.climaData.current.condition.icon,e.B4B),e.R7$(2),e.SpI("",s.climaData.current.temp_c,"\xb0C")}}const C=[{path:"",component:(()=>{var i;class c{constructor(t,o,r,n,g){this.router=t,this.aroute=o,this.alertController=r,this.api=n,this.db=g,this.vehiculoRegistrado=!1,this.saldoActual=0}ngOnInit(){this.nombreUsuario="nombre random",this.correoUsuario="correo random",this.aroute.paramMap.subscribe(t=>{var o;const r=null!==(o=t.get("usuarioid"))&&void 0!==o?o:"";this.usuarioid=parseInt(r,10)||0,console.log("Usuarioid en PerfilUsuarioPage:",this.usuarioid),this.usuarioid&&this.db.buscarUsuarioPorId(this.usuarioid).then(n=>{n&&(this.nombreUsuario=n.nombre,this.correoUsuario=n.correo)}).catch(n=>{})}),this.usuarioid&&this.db.verificarVehiculoRegistrado(this.usuarioid).then(t=>{this.vehiculoRegistrado=t,this.actualizarBotones()}).catch(t=>{})}obtenerSaldo(){this.db.obtenerSaldoActual(this.usuarioid).then(t=>{this.saldoActual=t}).catch(t=>{console.error("Error al obtener el saldo:",t)})}logout(){var t=this;return(0,u.A)(function*(){yield(yield t.alertController.create({header:"Cerrar sesi\xf3n",message:"\xbfEst\xe1s seguro de que quieres cerrar sesi\xf3n?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"S\xed",handler:()=>{t.router.navigate(["/home"])}}]})).present()})()}editProfile(){console.log("ID de Usuario P user:",this.usuarioid),this.router.navigate(["/moduser",this.usuarioid])}obtenerclima(){this.api.getclima().subscribe(t=>{this.climaData=t,console.log("si toy.",this.climaData),console.log("si toy.",this.climaData.current.temp_f)})}ionViewWillEnter(){this.obtenerclima(),this.obtenerSaldo()}actualizarBotones(){this.usuarioid&&this.db.verificarVehiculoRegistrado(this.usuarioid).then(n=>{this.vehiculoRegistrado=n}).catch(n=>{});const t=document.getElementById("registrarVehiculoButton"),o=document.getElementById("iniciarViajeButton"),r=document.getElementById("eliminarVehiculoButton");t&&o&&(this.vehiculoRegistrado?(o.disabled=!1,r.style.display="",t.style.display="none"):(o.disabled=!0,t.style.display="",r.style.display="none"))}iniciarViajeComoConductor(){var t=this;return(0,u.A)(function*(){t.vehiculoRegistrado?t.router.navigate(["/mapa",t.usuarioid]):yield(yield t.alertController.create({header:"Advertencia",message:"Debes registrar un veh\xedculo primero!!",buttons:["OK"]})).present()})()}ionViewDidEnter(){this.cargarVehiculos()}cargarVehiculos(){this.db.obtenerVehiculos().then(t=>{console.log("Datos de vehiculos obtenidos:",t)})}eliminarVehiculo(){var t=this;return(0,u.A)(function*(){try{yield t.db.eliminarVehiculoporuserid(t.usuarioid),console.log("Datos de vehiculos borrados:"),t.cargarVehiculos(),t.actualizarBotones()}catch(o){console.error("Error al eliminar veh\xedculo:",o)}})()}registrarVehiculo(){var t=this;return(0,u.A)(function*(){try{yield(yield t.alertController.create({header:"Registro de Veh\xedculo",message:"Completa los datos del veh\xedculo:",inputs:[{name:"patente",type:"text",placeholder:"Patente"},{name:"asientos",type:"number",placeholder:"Cantidad de Asientos"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Registrar",handler:r=>{const n={patente:r.patente,asientos:r.asientos,userid:t.usuarioid},g=t.validarPatente(r.patente),p=t.validarAsientos(r.asientos);g||p?g?p?t.db.registrarVehiculo(n).then(()=>{t.mostrarAlerta("Veh\xedculo Agregado","El veh\xedculo ha sido registrado correctamente."),t.actualizarBotones()}).catch(x=>{console.error("Error al registrar veh\xedculo:",x)}):t.mostrarAlerta("Error","Ingrese un n\xfamero de asientos v\xe1lido (entre 2 y 20)."):t.mostrarAlerta("Error","La patente ingresada no es v\xe1lida."):t.mostrarAlerta("Error","Por favor, ingrese valores v\xe1lidos para la patente y el n\xfamero de asientos.")}}]})).present()}catch(o){console.error("Error al verificar veh\xedculo registrado:",o)}})()}mostrarAlerta(t,o){var r=this;return(0,u.A)(function*(){yield(yield r.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}validarPatente(t){return/^[a-zA-Z]{4}\d{2}$/.test(t)}validarAsientos(t){return t>=1&&t<=15}mostrarHistorialViajes(){var t=this;return(0,u.A)(function*(){t.router.navigate(["/historialconductor",t.usuarioid])})()}saldoconductor(){var t=this;return(0,u.A)(function*(){t.router.navigate(["/pagosconductor",t.usuarioid])})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(d.Ix),e.rXU(d.nX),e.rXU(b.hG),e.rXU(P.M),e.rXU(v.J))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-perfilconductor"]],decls:32,vars:9,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"profile-card"],[1,"custom-item"],["name","settings","slot","start","color","primary",1,"settings-icon",3,"click"],["slot","end","color","primary",1,"saldo-label"],["name","log-out","slot","end","color","primary",1,"logout-icon",3,"click"],["class","clima-container",4,"ngIf"],[1,"profile-image-container"],[1,"profile-image"],["src","uber\\src\\assets\\img\\graduation-1345143_640.png"],[1,"profile-name"],[1,"profile-email"],[1,"login-buttons"],["id","iniciarViajeButton","expand","full","color","primary",3,"click"],["id","registrarVehiculoButton","expand","full","color","primary",3,"click"],["id","eliminarVehiculoButton","expand","full","color","danger",3,"click"],["id","historialButton","expand","full","color","success",3,"click"],[1,"clima-container"],[1,"clima-item"],["slot","start","alt","Clima Icon",1,"clima-icon",3,"src"],["slot","end","color","primary"]],template:function(t,o){1&t&&(e.j41(0,"ion-content",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"ion-card",3)(4,"ion-item",4)(5,"ion-icon",5),e.bIt("click",function(){return o.editProfile()}),e.EFF(6,"Edit Perfil"),e.k0s(),e.j41(7,"ion-label",6),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"ion-icon",7),e.bIt("click",function(){return o.logout()}),e.k0s()(),e.j41(11,"ion-card-header"),e.DNE(12,y,5,2,"ion-list",8),e.k0s(),e.j41(13,"ion-card-content")(14,"div",9)(15,"div",10),e.nrm(16,"ion-img",11),e.k0s()(),e.j41(17,"div",12),e.EFF(18),e.k0s(),e.j41(19,"div",13),e.EFF(20),e.k0s(),e.j41(21,"div",14)(22,"ion-button",15),e.bIt("click",function(){return o.iniciarViajeComoConductor()}),e.EFF(23," Iniciar Viaje Como Conductor "),e.k0s(),e.j41(24,"ion-button",16),e.bIt("click",function(){return o.registrarVehiculo()}),e.EFF(25," Registrar Vehiculo "),e.k0s(),e.j41(26,"ion-button",17),e.bIt("click",function(){return o.eliminarVehiculo()}),e.EFF(27," Eliminar Veh\xedculo "),e.k0s(),e.j41(28,"ion-button",18),e.bIt("click",function(){return o.mostrarHistorialViajes()}),e.EFF(29," Historial "),e.k0s(),e.j41(30,"ion-button",18),e.bIt("click",function(){return o.saldoconductor()}),e.EFF(31," Historial de pagos "),e.k0s()()()()()()),2&t&&(e.Y8G("fullscreen",!0),e.R7$(8),e.SpI("sueldo total: ",e.brH(9,5,o.saldoActual,"USD","symbol"),""),e.R7$(4),e.Y8G("ngIf",o.climaData),e.R7$(6),e.JRh(o.nombreUsuario),e.R7$(2),e.JRh(o.correoUsuario))},dependencies:[h.bT,l.Jm,l.b_,l.I9,l.ME,l.W9,l.iq,l.KW,l.uz,l.he,l.nf,h.oe],styles:['@charset "UTF-8";ion-card.profile-card[_ngcontent-%COMP%]{width:90%;height:65%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.profile-card[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:50%;background:linear-gradient(to bottom,#00b894,#0984e3);width:100px;height:100px;margin:0 auto 10px}ion-card.profile-card[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-button[_ngcontent-%COMP%]{margin-top:10px}ion-list.clima-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:40px;border-radius:10px}ion-item.clima-item[_ngcontent-%COMP%]{display:flex;align-items:center}ion-label[_ngcontent-%COMP%]{display:flex;align-items:center}img.clima-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:10px}.custom-button[_ngcontent-%COMP%]{white-space:normal;text-align:center;font-size:16px;padding:12px;border-radius:10px}.login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10px}.login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{white-space:normal;width:90%;margin-top:10px;border-radius:10px;font-size:10px}']}),c})()}];let V=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.iI.forChild(C),d.iI]}),c})(),_=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.MD,f.YN,l.bv,V]}),c})()}}]);