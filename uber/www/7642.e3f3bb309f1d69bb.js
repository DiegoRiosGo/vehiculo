"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7642],{7642:(M,d,i)=>{i.r(d),i.d(d,{NuevacontraenaPageModule:()=>P});var g=i(177),p=i(4341),r=i(849),l=i(8986),n=i(4438),h=i(6210);let m=(()=>{var o;class t{constructor(){}validarcontrase\u00f1a(a,e,c){return/^(?=.*[a-zA-Z])(?=.*[^a-zA-Z\d\s]{2})(?=.*\d)(?!.*\bemail\b)(?!.*\bnombre\b)(?!.*(\d)\1)(?=.{5,12}$)/.test(a)&&!this.esSimilar(a,e,c)}esSimilar(a,e,c){const u=a.toLowerCase(),f=e.toLowerCase(),C=c.toLowerCase();return u.includes(f)||u.includes(C)}}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275prov=n.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();const v=[{path:"",component:(()=>{var o;class t{constructor(a,e,c,u){this.db=a,this.aroute=e,this.router=c,this.valcontrase\u00f1a=u}ngOnInit(){this.aroute.paramMap.subscribe(a=>{var e;const c=null!==(e=a.get("usuarioid"))&&void 0!==e?e:"";this.usuarioid=parseInt(c,10)||0,console.log("Usuarioid en nuevacontrase\xf1a:",this.usuarioid)})}validarYCambiarContrase\u00f1a(){this.contrasena===this.rcontrasena&&this.valcontrase\u00f1a.validarcontrase\u00f1a(this.contrasena,"correo","nombre")?this.db.buscarUsuarioPorId(this.usuarioid).then(a=>{a?(this.usuario=a,this.db.actualizarUsuario(this.usuario.usuarioid,this.usuario.nombre,this.usuario.apellido,this.usuario.correo,this.contrasena,this.usuario.idpreguntas,this.usuario.respuesta,this.usuario.rolid,this.usuario.imagenperfil).then(()=>{console.log("Contrasena actualizada correctamente."),this.router.navigate(["/home"])}).catch(e=>{console.error("Error al actualizar la contrasena:",e)})):console.log("No se encontr\xf3 el usuario con ID:",this.usuarioid)}).catch(a=>{console.error("Error al buscar usuario por ID:",a)}):console.log("Las contrasenas no coinciden o no cumplen con los criterios de validaci\xf3n.")}}return(o=t).\u0275fac=function(a){return new(a||o)(n.rXU(h.J),n.rXU(l.nX),n.rXU(l.Ix),n.rXU(m))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-nuevacontraena"]],decls:21,vars:3,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"login-card"],[1,"custom-item"],["position","floating","color","primary"],["type","password"],[1,"login-buttons"],["expand","full","color","success"]],template:function(a,e){1&a&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-card",3)(4,"ion-card-content")(5,"h2"),n.EFF(6,"Nueva contrasena"),n.k0s(),n.j41(7,"ion-item",4)(8,"ion-label",5),n.EFF(9,"Contrasena"),n.k0s(),n.j41(10,"ion-input",6),n.EFF(11),n.k0s()(),n.j41(12,"ion-item",4)(13,"ion-label",5),n.EFF(14,"Repita la Contrasena"),n.k0s(),n.j41(15,"ion-input",6),n.EFF(16),n.k0s()(),n.j41(17,"div",7)(18,"ion-button",8),n.EFF(19,"aceptar"),n.k0s(),n.nrm(20,"br"),n.k0s()()()()()()),2&a&&(n.Y8G("fullscreen",!0),n.R7$(11),n.JRh(e.contrasena),n.R7$(5),n.JRh(e.rcontrasena))},dependencies:[r.Jm,r.b_,r.I9,r.W9,r.$w,r.uz,r.he,r.Gw],styles:["ion-card.login-card[_ngcontent-%COMP%]{width:90%;height:70%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item-head[_ngcontent-%COMP%]{width:90%;margin:20px auto auto;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{width:90%;margin:20px auto auto;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10px}.login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:90%;margin-top:10px;border-radius:10px;font-size:10px}.recovery-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.mensaje-error[_ngcontent-%COMP%]{color:red;margin-top:10px}"]}),t})()}];let b=(()=>{var o;class t{}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[l.iI.forChild(v),l.iI]}),t})(),P=(()=>{var o;class t{}return(o=t).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[g.MD,p.YN,r.bv,b]}),t})()}}]);