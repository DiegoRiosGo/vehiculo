"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2804],{2804:(P,d,a)=>{a.r(d),a.d(d,{RegistroPageModule:()=>b});var p=a(6814),u=a(95),i=a(9004),c=a(3044),h=a(5861),e=a(6689),m=a(4414),_=a(9167);function C(n,l){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const g=l.$implicit;e.xp6(1),e.hij(" ",g," ")}}const M=function(){return["/home"]},Z=[{path:"",component:(()=>{var n;class l{constructor(s,o,r){this.alertController=s,this.dbService=o,this.router=r,this.nombre="",this.apellido="",this.correo="",this.contrasena="",this.con_contrasena="",this.selectedSecurityQuestion="",this.respuesta="",this.selectedRole=0,this.mensajes=[]}registrarUsuario(){this.mensajes=[],0!==this.selectedRole?this.contrasena===this.con_contrasena?this.nombre?this.apellido?this.correo?this.contrasena?this.selectedSecurityQuestion?this.respuesta?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.correo)?/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}$/.test(this.contrasena)?this.dbService.verificarCorreoExistente(this.correo).then(r=>{r?this.mensajes.push("El correo electr\xf3nico ya est\xe1 registrado"):this.dbService.insertarUsuario(this.nombre,this.apellido,this.correo,this.contrasena,+this.selectedSecurityQuestion,this.respuesta,this.selectedRole).then(()=>{this.MsjRegistro(),this.router.navigate(["/home"])}).catch(t=>{console.error("Error al registrar usuario",t)})}).catch(r=>{console.error("Error al verificar correo existente",r)}):this.mensajes.push("La contrase\xf1a debe contener al menos 1 may\xfascula, 1 min\xfascula, 1 n\xfamero y tener al menos 8 caracteres"):this.mensajes.push("Correo electr\xf3nico no v\xe1lido"):this.mensajes.push("Campo 'Respuesta' es obligatorio"):this.mensajes.push("Debes seleccionar una pregunta de seguridad"):this.mensajes.push("Campo 'Contrase\xf1a' es obligatorio"):this.mensajes.push("Campo 'Correo' es obligatorio"):this.mensajes.push("Campo 'Apellido' es obligatorio"):this.mensajes.push("Campo 'Nombre' es obligatorio"):this.mensajes.push("Las contrase\xf1as no coinciden"):this.mensajes.push("Debes seleccionar un rol antes de registrarte.")}MsjRegistro(){var s=this;return(0,h.Z)(function*(){yield(yield s.alertController.create({header:"Te damos la bienvenida",message:"Usuario creado exitosamente",buttons:[{text:"OK",role:"ok",cssClass:"primary",handler:r=>{}}]})).present()})()}ngOnInit(){}}return(n=l).\u0275fac=function(s){return new(s||n)(e.Y36(m.Br),e.Y36(_.A),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-registro"]],decls:59,vars:12,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"login-card"],[1,"custom-item-head"],["slot","start"],["fill","clear","color","success",1,"back-button",3,"routerLink"],["name","arrow-back"],[1,"custom-item"],["position","floating","color","primary"],["type","text",3,"ngModel","ngModelChange"],["type","email",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["class","mensaje-error",4,"ngFor","ngForOf"],["expand","full","color","success",3,"click"],[1,"mensaje-error"]],template:function(s,o){1&s&&(e.TgZ(0,"ion-content",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"ion-card",3)(4,"ion-item",4)(5,"ion-buttons",5)(6,"ion-button",6),e._UZ(7,"ion-icon",7),e.qZA()(),e.TgZ(8,"p"),e._uU(9,"Crear usuario"),e.qZA()(),e.TgZ(10,"ion-card-content")(11,"ion-item",8)(12,"ion-label",9),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"ion-input",10),e.NdJ("ngModelChange",function(t){return o.nombre=t}),e.qZA()(),e.TgZ(15,"ion-item",8)(16,"ion-label",9),e._uU(17,"Apellido"),e.qZA(),e.TgZ(18,"ion-input",10),e.NdJ("ngModelChange",function(t){return o.apellido=t}),e.qZA()(),e.TgZ(19,"ion-item",8)(20,"ion-label",9),e._uU(21,"Correo electr\xf3nico"),e.qZA(),e.TgZ(22,"ion-input",11),e.NdJ("ngModelChange",function(t){return o.correo=t}),e.qZA()(),e.TgZ(23,"ion-item",8)(24,"ion-label",9),e._uU(25,"Contrase\xf1a"),e.qZA(),e.TgZ(26,"ion-input",12),e.NdJ("ngModelChange",function(t){return o.contrasena=t}),e.qZA()(),e.TgZ(27,"ion-item",8)(28,"ion-label",9),e._uU(29,"Confirmar contrase\xf1a"),e.qZA(),e.TgZ(30,"ion-input",12),e.NdJ("ngModelChange",function(t){return o.con_contrasena=t}),e.qZA()(),e._UZ(31,"br"),e.TgZ(32,"h2"),e._uU(33,"Pregunta de seguridad"),e.qZA(),e.TgZ(34,"ion-item",8)(35,"ion-label",9),e._uU(36,"Pregunta de seguridad"),e.qZA(),e.TgZ(37,"ion-select",13),e.NdJ("ngModelChange",function(t){return o.selectedSecurityQuestion=t}),e.TgZ(38,"ion-select-option",14),e._uU(39,"\xbfCu\xe1l es el nombre de tu primer mascota?"),e.qZA(),e.TgZ(40,"ion-select-option",15),e._uU(41,"\xbfEn qu\xe9 ciudad naciste?"),e.qZA(),e.TgZ(42,"ion-select-option",16),e._uU(43,"\xbfCu\xe1l es tu comida favorita?"),e.qZA()()(),e.TgZ(44,"ion-item",8)(45,"ion-label",9),e._uU(46,"Respuesta"),e.qZA(),e.TgZ(47,"ion-input",10),e.NdJ("ngModelChange",function(t){return o.respuesta=t}),e.qZA()(),e.TgZ(48,"ion-item",8)(49,"ion-label",9),e._uU(50,"Selecciona tu rol"),e.qZA(),e.TgZ(51,"ion-select",13),e.NdJ("ngModelChange",function(t){return o.selectedRole=t}),e.TgZ(52,"ion-select-option",15),e._uU(53,"Cliente"),e.qZA(),e.TgZ(54,"ion-select-option",16),e._uU(55,"Conductor"),e.qZA()()(),e.YNc(56,C,2,1,"div",17),e.TgZ(57,"ion-button",18),e.NdJ("click",function(){return o.registrarUsuario()}),e._uU(58,"Registrarse"),e.qZA()()()()()),2&s&&(e.Q6J("fullscreen",!0),e.xp6(6),e.Q6J("routerLink",e.DdM(11,M)),e.xp6(8),e.Q6J("ngModel",o.nombre),e.xp6(4),e.Q6J("ngModel",o.apellido),e.xp6(4),e.Q6J("ngModel",o.correo),e.xp6(4),e.Q6J("ngModel",o.contrasena),e.xp6(4),e.Q6J("ngModel",o.con_contrasena),e.xp6(7),e.Q6J("ngModel",o.selectedSecurityQuestion),e.xp6(10),e.Q6J("ngModel",o.respuesta),e.xp6(4),e.Q6J("ngModel",o.selectedRole),e.xp6(5),e.Q6J("ngForOf",o.mensajes))},dependencies:[p.sg,u.JJ,u.On,i.YG,i.Sm,i.PM,i.FN,i.W2,i.gu,i.pK,i.Ie,i.Q$,i.t9,i.n0,i.QI,i.j9,i.YI,c.rH],styles:['@charset "UTF-8";ion-card.login-card[_ngcontent-%COMP%]{width:90%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{width:100%;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1);margin-top:10px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-button[_ngcontent-%COMP%]{margin-top:10px}.recovery-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.p[_ngcontent-%COMP%]{opacity:.7}.container[_ngcontent-%COMP%]{width:100%;height:100%}.mensaje-error[_ngcontent-%COMP%]{color:red;margin-top:10px}']}),l})()}];let f=(()=>{var n;class l{}return(n=l).\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),l})(),b=(()=>{var n;class l{}return(n=l).\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,u.u5,i.Pc,f]}),l})()}}]);