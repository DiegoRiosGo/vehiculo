"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3424],{3424:(_,d,a)=>{a.r(d),a.d(d,{RegistroPageModule:()=>j});var m=a(177),u=a(4341),r=a(849),g=a(8986),h=a(467),e=a(4438),p=a(9348),R=a(6210);const C=()=>["/home"];function M(t,l){if(1&t&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&t){const c=l.$implicit;e.R7$(),e.SpI(" ",c," ")}}const b=[{path:"",component:(()=>{var t;class l{constructor(s,o,i){this.alertController=s,this.dbService=o,this.router=i,this.nombre="",this.apellido="",this.correo="",this.contrasena="",this.con_contrasena="",this.selectedSecurityQuestion="",this.respuesta="",this.selectedRole=0,this.mensajes=[]}registrarUsuario(){this.mensajes=[],0!==this.selectedRole?this.contrasena===this.con_contrasena?this.nombre?this.apellido?this.correo?this.contrasena?this.selectedSecurityQuestion?this.respuesta?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.correo)?/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}$/.test(this.contrasena)?this.dbService.verificarCorreoExistente(this.correo).then(i=>{i?this.mensajes.push("El correo electr\xf3nico ya est\xe1 registrado"):this.dbService.insertarUsuario(this.nombre,this.apellido,this.correo,this.contrasena,+this.selectedSecurityQuestion,this.respuesta,this.selectedRole).then(()=>{this.MsjRegistro(),this.router.navigate(["/home"])}).catch(n=>{console.error("Error al registrar usuario",n)})}).catch(i=>{console.error("Error al verificar correo existente",i)}):this.mensajes.push("La contrase\xf1a debe contener al menos 1 may\xfascula, 1 min\xfascula, 1 n\xfamero y tener al menos 8 caracteres"):this.mensajes.push("Correo electr\xf3nico no v\xe1lido"):this.mensajes.push("Campo 'Respuesta' es obligatorio"):this.mensajes.push("Debes seleccionar una pregunta de seguridad"):this.mensajes.push("Campo 'Contrase\xf1a' es obligatorio"):this.mensajes.push("Campo 'Correo' es obligatorio"):this.mensajes.push("Campo 'Apellido' es obligatorio"):this.mensajes.push("Campo 'Nombre' es obligatorio"):this.mensajes.push("Las contrase\xf1as no coinciden"):this.mensajes.push("Debes seleccionar un rol antes de registrarte.")}MsjRegistro(){var s=this;return(0,h.A)(function*(){yield(yield s.alertController.create({header:"Te damos la bienvenida",message:"Usuario creado exitosamente",buttons:[{text:"OK",role:"ok",cssClass:"primary",handler:i=>{}}]})).present()})()}ngOnInit(){}}return(t=l).\u0275fac=function(s){return new(s||t)(e.rXU(p.hG),e.rXU(R.J),e.rXU(g.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-registro"]],decls:59,vars:12,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"login-card"],[1,"custom-item-head"],["slot","start"],["fill","clear","color","success",1,"back-button",3,"routerLink"],["name","arrow-back"],[1,"custom-item"],["position","floating","color","primary"],["type","text",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["class","mensaje-error",4,"ngFor","ngForOf"],["expand","full","color","success",3,"click"],[1,"mensaje-error"]],template:function(s,o){1&s&&(e.j41(0,"ion-content",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"ion-card",3)(4,"ion-item",4)(5,"ion-buttons",5)(6,"ion-button",6),e.nrm(7,"ion-icon",7),e.k0s()(),e.j41(8,"p"),e.EFF(9,"Crear usuario"),e.k0s()(),e.j41(10,"ion-card-content")(11,"ion-item",8)(12,"ion-label",9),e.EFF(13,"Nombre"),e.k0s(),e.j41(14,"ion-input",10),e.mxI("ngModelChange",function(n){return e.DH7(o.nombre,n)||(o.nombre=n),n}),e.k0s()(),e.j41(15,"ion-item",8)(16,"ion-label",9),e.EFF(17,"Apellido"),e.k0s(),e.j41(18,"ion-input",10),e.mxI("ngModelChange",function(n){return e.DH7(o.apellido,n)||(o.apellido=n),n}),e.k0s()(),e.j41(19,"ion-item",8)(20,"ion-label",9),e.EFF(21,"Correo electr\xf3nico"),e.k0s(),e.j41(22,"ion-input",11),e.mxI("ngModelChange",function(n){return e.DH7(o.correo,n)||(o.correo=n),n}),e.k0s()(),e.j41(23,"ion-item",8)(24,"ion-label",9),e.EFF(25,"Contrase\xf1a"),e.k0s(),e.j41(26,"ion-input",12),e.mxI("ngModelChange",function(n){return e.DH7(o.contrasena,n)||(o.contrasena=n),n}),e.k0s()(),e.j41(27,"ion-item",8)(28,"ion-label",9),e.EFF(29,"Confirmar contrase\xf1a"),e.k0s(),e.j41(30,"ion-input",12),e.mxI("ngModelChange",function(n){return e.DH7(o.con_contrasena,n)||(o.con_contrasena=n),n}),e.k0s()(),e.nrm(31,"br"),e.j41(32,"h2"),e.EFF(33,"Pregunta de seguridad"),e.k0s(),e.j41(34,"ion-item",8)(35,"ion-label",9),e.EFF(36,"Pregunta de seguridad"),e.k0s(),e.j41(37,"ion-select",13),e.mxI("ngModelChange",function(n){return e.DH7(o.selectedSecurityQuestion,n)||(o.selectedSecurityQuestion=n),n}),e.j41(38,"ion-select-option",14),e.EFF(39,"\xbfCu\xe1l es el nombre de tu primer mascota?"),e.k0s(),e.j41(40,"ion-select-option",15),e.EFF(41,"\xbfEn qu\xe9 ciudad naciste?"),e.k0s(),e.j41(42,"ion-select-option",16),e.EFF(43,"\xbfCu\xe1l es tu comida favorita?"),e.k0s()()(),e.j41(44,"ion-item",8)(45,"ion-label",9),e.EFF(46,"Respuesta"),e.k0s(),e.j41(47,"ion-input",10),e.mxI("ngModelChange",function(n){return e.DH7(o.respuesta,n)||(o.respuesta=n),n}),e.k0s()(),e.j41(48,"ion-item",8)(49,"ion-label",9),e.EFF(50,"Selecciona tu rol"),e.k0s(),e.j41(51,"ion-select",13),e.mxI("ngModelChange",function(n){return e.DH7(o.selectedRole,n)||(o.selectedRole=n),n}),e.j41(52,"ion-select-option",15),e.EFF(53,"Cliente"),e.k0s(),e.j41(54,"ion-select-option",16),e.EFF(55,"Conductor"),e.k0s()()(),e.DNE(56,M,2,1,"div",17),e.j41(57,"ion-button",18),e.bIt("click",function(){return o.registrarUsuario()}),e.EFF(58,"Registrarse"),e.k0s()()()()()),2&s&&(e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("routerLink",e.lJ4(11,C)),e.R7$(8),e.R50("ngModel",o.nombre),e.R7$(4),e.R50("ngModel",o.apellido),e.R7$(4),e.R50("ngModel",o.correo),e.R7$(4),e.R50("ngModel",o.contrasena),e.R7$(4),e.R50("ngModel",o.con_contrasena),e.R7$(7),e.R50("ngModel",o.selectedSecurityQuestion),e.R7$(10),e.R50("ngModel",o.respuesta),e.R7$(4),e.R50("ngModel",o.selectedRole),e.R7$(5),e.Y8G("ngForOf",o.mensajes))},dependencies:[m.Sq,u.BC,u.vS,r.Jm,r.QW,r.b_,r.I9,r.W9,r.iq,r.$w,r.uz,r.he,r.Nm,r.Ip,r.Je,r.Gw,r.N7,g.Wk],styles:['@charset "UTF-8";ion-card.login-card[_ngcontent-%COMP%]{width:90%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{width:100%;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1);margin-top:10px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}ion-card.login-card[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-button[_ngcontent-%COMP%]{margin-top:10px}.recovery-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.p[_ngcontent-%COMP%]{opacity:.7}.container[_ngcontent-%COMP%]{width:100%;height:100%}.mensaje-error[_ngcontent-%COMP%]{color:red;margin-top:10px}']}),l})()}];let f=(()=>{var t;class l{}return(t=l).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(b),g.iI]}),l})(),j=(()=>{var t;class l{}return(t=l).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.MD,u.YN,r.bv,f]}),l})()}}]);