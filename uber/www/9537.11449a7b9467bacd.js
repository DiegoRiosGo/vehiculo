"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9537],{1918:(y,m,a)=>{a.r(m),a.d(m,{ModuserPageModule:()=>I});var d=a(177),g=a(4341),r=a(849),u=a(8986),p=a(467),e=a(4438),f=a(322),h=a(9348),b=a(6210);const M=()=>["/recuperar"];function P(o,i){if(1&o&&e.nrm(0,"img",17),2&o){const s=e.XpG();e.Y8G("src",s.capturedImage||s.imagePath,e.B4B)}}function C(o,i){1&o&&e.nrm(0,"ion-icon",18)}function v(o,i){if(1&o&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&o){const s=i.$implicit;e.R7$(),e.SpI(" ",s," ")}}const k=[{path:"",component:(()=>{var o;class i{constructor(n,t,l,c,j,O){this.location=n,this.cameraService=t,this.alertController=l,this.aroute=c,this.db=j,this.router=O,this.mensajes=[]}ngOnInit(){this.aroute.paramMap.subscribe(n=>{var t;const l=null!==(t=n.get("usuarioid"))&&void 0!==t?t:"";this.usuarioid=parseInt(l,10)||0,console.log("Usuarioid en PerfilUsuarioPage:",this.usuarioid),this.usuarioid&&this.db.buscarUsuarioPorId(this.usuarioid).then(c=>{c&&(this.nombreUsuario=c.nombre,this.rolid=c.rolid,console.log("Usuarioid en PerfilUsuarioPage:",this.nombreUsuario))}).catch(c=>{})})}takePicture(){var n=this;return(0,p.A)(function*(){n.capturedImage=yield n.cameraService.takePicture(),n.imagePath=n.capturedImage})()}presentAlertConfirm(){var n=this;return(0,p.A)(function*(){yield(yield n.alertController.create({header:"Cambiar Foto de Perfil",message:"\xbfQuiere cambiar su foto de perfil?",buttons:[{text:"No",role:"cancel",handler:()=>{console.log("No desea cambiar la foto")}},{text:"S\xed",handler:()=>{n.takePicture()}}]})).present()})()}guardarCambios(n){this.mensajes=[],n&&this.db.actualizarNombreUsuario(this.usuarioid,n).then(()=>{this.mensajes.push("Nombre actualizado con \xe9xito."),console.log(this.nombreUsuario),console.log(n),this.nombreUsuario=n,this.db.obtenerUsuarios().then(t=>{this.nombreUsuario=n})}).catch(t=>{console.error("Error al actualizar el nombre:",t)})}goBack(){this.location.back()}}return(o=i).\u0275fac=function(n){return new(n||o)(e.rXU(d.aZ),e.rXU(f.X),e.rXU(h.hG),e.rXU(u.nX),e.rXU(b.J),e.rXU(u.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-moduser"]],decls:24,vars:8,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"edit-profile-card"],["slot","start"],["fill","clear","expand","full","color","success",1,"back-button",3,"click"],["name","arrow-back"],[1,"profile-image",3,"click"],["alt","Imagen Capturada",3,"src",4,"ngIf"],["name","camera","slot","end","color","light","class","camera-icon",4,"ngIf"],["class","mensaje-error",4,"ngFor","ngForOf"],[1,"profile-name"],[1,"custom-item"],["color","primary","position","floating"],["type","text",3,"ngModelChange","ngModel"],["expand","full","color","primary",3,"routerLink"],["expand","full","color","success",3,"click"],["alt","Imagen Capturada",3,"src"],["name","camera","slot","end","color","light",1,"camera-icon"],[1,"mensaje-error"]],template:function(n,t){1&n&&(e.j41(0,"ion-content",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"ion-card",3)(4,"ion-card-content")(5,"h2"),e.EFF(6,"Editar perfil"),e.k0s(),e.j41(7,"ion-buttons",4)(8,"ion-button",5),e.bIt("click",function(){return t.goBack()}),e.nrm(9,"ion-icon",6),e.k0s()(),e.j41(10,"div",7),e.bIt("click",function(){return t.presentAlertConfirm()}),e.DNE(11,P,1,1,"img",8)(12,C,1,0,"ion-icon",9),e.k0s(),e.DNE(13,v,2,1,"div",10),e.j41(14,"div",11),e.EFF(15),e.k0s(),e.j41(16,"ion-item",12)(17,"ion-label",13),e.EFF(18,"Nuevo nombre"),e.k0s(),e.j41(19,"ion-input",14),e.mxI("ngModelChange",function(c){return e.DH7(t.nuevoNombre,c)||(t.nuevoNombre=c),c}),e.k0s()(),e.j41(20,"ion-button",15),e.EFF(21,"Cambiar contrase\xf1a"),e.k0s(),e.j41(22,"ion-button",16),e.bIt("click",function(){return t.guardarCambios(t.nuevoNombre)}),e.EFF(23,"Guardar Cambios"),e.k0s()()()()()),2&n&&(e.Y8G("fullscreen",!0),e.R7$(11),e.Y8G("ngIf",t.capturedImage||t.imagePath),e.R7$(),e.Y8G("ngIf",!t.capturedImage),e.R7$(),e.Y8G("ngForOf",t.mensajes),e.R7$(2),e.JRh(t.nombreUsuario),e.R7$(4),e.R50("ngModel",t.nuevoNombre),e.R7$(),e.Y8G("routerLink",e.lJ4(7,M)))},dependencies:[d.Sq,d.bT,g.BC,g.vS,r.Jm,r.QW,r.b_,r.I9,r.W9,r.iq,r.$w,r.uz,r.he,r.Gw,r.N7,u.Wk],styles:[".custom-item[_ngcontent-%COMP%]{width:90%;margin:20px auto auto;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(255,255,255,.1)}.custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}.custom-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}ion-card.edit-profile-card[_ngcontent-%COMP%]{width:90%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}.profile-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;width:150px;height:150px;border-radius:50%;margin:0 auto;background:linear-gradient(to bottom,#00b894,#0984e3);color:#fff}.profile-image[_ngcontent-%COMP%]   ion-icon.camera-icon[_ngcontent-%COMP%]{font-size:40px;color:var(--ion-color-success);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1}.profile-image[_ngcontent-%COMP%]   img.camera-icon[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;z-index:0}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.mensaje-error[_ngcontent-%COMP%]{color:#0984e3}.profile-name[_ngcontent-%COMP%]{color:#00b894}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-button[_ngcontent-%COMP%]{margin-top:10px;font-size:10px}.recovery-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.muted-label[_ngcontent-%COMP%]{opacity:.7}"]}),i})()}];let x=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.iI.forChild(k),u.iI]}),i})(),I=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.MD,g.YN,r.bv,x]}),i})()}}]);